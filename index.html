<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Friendly Map Project</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway">
    <style>
        header {
            background-color: #F8F9FA;
            height: 50px;
            padding: 5px 10px;
            border-bottom: 2px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header img {
            height: 100%;
            width: auto;
            margin-right: auto;
        }

        nav {
            display: flex;
            align-items: center;
        }

        nav a {
            margin-left: 10px;
            text-decoration: none;
            color: #333;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Quicksand', sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        h3 {
            font-size: 13px;
            font-weight: bold;
            font-family: 'Raleway', sans-serif;
            margin: 0;
            padding-bottom: 3px;
        }

        #map {
            flex-grow: 1;
            width: 100%;
            height: 100vh;
        }

        .pill-button {
            display: inline-block;
            background-color: #FF8593;
            color: white;
            font-family: 'Nunito', sans-serif;
            font-size: 10px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 20px;
            text-align: center;
            margin-top: 3px;
            margin-bottom: 3px;
        }

        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            font-family: 'Quicksand', sans-serif;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            background-color: #F8F9FA;
            padding: 5px;
        }

    </style>
</head>

<body>
    <header>
        <img src="https://github.com/torimurrant/familyfriendmapproject/blob/main/icons/icon.png?raw=true">
        <nav>
           <a href="#">link</a>
           <a href="#">link</a>
           <a href="#">link</a>
        </nav>
    </header>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.js"></script>
    <script>
            // initialise map
            var map = L.map('map', {
            zoomControl: false // disable the default zoom control
            }).setView([-32.928, 151.750], 12.8);

            // custom zoom controls
            L.control.zoom({
            position: 'bottomright' // move zoom control to bottom right
            }).addTo(map);

            // base map
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidG11cnJhbnQiLCJhIjoiY2xpamh3aGh3MDdkMzNwcGVsNWtkYTRocCJ9.qCJ8olgYw2nqd4HPCXQ7-Q', {
            attribution: '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, ' +
                        '<a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'tmurrant/clvlz3ce8019i01q190ig5dvt',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoidG11cnJhbnQiLCJhIjoiY2xpamh3aGh3MDdkMzNwcGVsNWtkYTRocCJ9.qCJ8olgYw2nqd4HPCXQ7-Q' // replace this with your Mapbox access token
            }).addTo(map);


            // add playgrounds geojson
            // fetch GeoJSON data
            fetch('https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/main/layers/playgrounds.geojson')
                .then(response => response.json())
                .then(data => {
                    L.geoJSON(data, {
                    pointToLayer: function (feature, latlng) {
                        return L.marker(latlng, {
                        icon: L.icon({
                            iconUrl: 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/main/icons/playground.svg',
                            iconSize: [32, 32],
                            iconAnchor: [16, 16],
                            popupAnchor: [0, -16]
                        })
                        });
                    },
                    onEachFeature: (feature, layer) => {
                        let cafeIcon = feature.properties.Cafes === 'Yes' 
                        ? 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/31b9945b09883cb8eb6e4719f803f0d1145d13d2/icons/cafe_true.svg'
                        : 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/68d9d3d2835765086bdc78859024032690682e0a/icons/cafe_null.svg';
                        
                        let fenceIcon = feature.properties.Fenced === 'Yes' 
                        ? 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/31b9945b09883cb8eb6e4719f803f0d1145d13d2/icons/fence_true.svg'
                        : 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/68d9d3d2835765086bdc78859024032690682e0a/icons/fence_null.svg';

                        let toiletIcon = feature.properties.Toilets === 'Yes' 
                        ? 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/31b9945b09883cb8eb6e4719f803f0d1145d13d2/icons/toilet_true.svg'
                        : 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/31b9945b09883cb8eb6e4719f803f0d1145d13d2/icons/toilet_null.svg';
                        
                        let inclusiveIcon = feature.properties.Inclusive === 'Yes' 
                        ? 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/ee43a773f9a7a825cb5c7735648e92c4be77ede3/icons/inclusive_true.svg'
                        : 'https://raw.githubusercontent.com/torimurrant/familyfriendmapproject/ee43a773f9a7a825cb5c7735648e92c4be77ede3/icons/inclusive_null.svg';
                        
                        //amend pop-up
                        layer.bindPopup(
                        `
                            <h3>${feature.properties.Park}</h3>
                            <div class="pill-button">Playground</div>
                        <br>
                            <img src="${cafeIcon}" style="width:24px;height:24px;">
                            <img src="${fenceIcon}" style="width:24px;height:24px;">
                            <img src="${toiletIcon}" style="width:24px;height:24px;">
                            <img src="${inclusiveIcon}" style="width:24px;height:24px;">
                        `
                        );
                    }
                    }).addTo(map);
                })
    </script>
</body>
</html>
